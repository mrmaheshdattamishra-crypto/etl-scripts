schema:
  name: monthly_sales_star_schema
  description: Star schema for monthly sales analysis with fact and dimension tables
  
  tables:
    # Fact Table
    - name: fact_monthly_sales
      description: Monthly aggregated sales facts by item and store
      type: fact
      columns:
        - name: sales_month_key
          data_type: STRING
          description: Composite key representing year-month (YYYY-MM format)
        - name: item_key
          data_type: NUMBER
          description: Foreign key to item dimension
        - name: store_key
          data_type: NUMBER
          description: Foreign key to store dimension
        - name: year
          data_type: NUMBER
          description: Sales year
        - name: month
          data_type: NUMBER
          description: Sales month (1-12)
        - name: total_quantity
          data_type: NUMBER
          description: Total quantity sold for the month
        - name: total_sales_amount
          data_type: NUMBER
          description: Total extended sales price for the month
        - name: total_net_paid
          data_type: NUMBER
          description: Total net amount paid for the month
        - name: total_net_profit
          data_type: NUMBER
          description: Total net profit for the month
        - name: transaction_count
          data_type: NUMBER
          description: Count of distinct transactions for the month

    # Dimension Tables
    - name: dim_item
      description: Item dimension containing product information
      type: dimension
      columns:
        - name: item_key
          data_type: NUMBER
          description: Primary key for item dimension
        - name: item_id
          data_type: STRING
          description: Business identifier for item
        - name: item_description
          data_type: STRING
          description: Detailed description of the item
        - name: brand
          data_type: STRING
          description: Brand name of the item
        - name: class
          data_type: STRING
          description: Item class classification
        - name: category
          data_type: STRING
          description: Item category classification
        - name: product_name
          data_type: STRING
          description: Product name of the item

    - name: dim_store
      description: Store dimension containing store location and hierarchy information
      type: dimension
      columns:
        - name: store_key
          data_type: NUMBER
          description: Primary key for store dimension
        - name: store_id
          data_type: STRING
          description: Business identifier for store
        - name: store_name
          data_type: STRING
          description: Name of the store
        - name: city
          data_type: STRING
          description: City where store is located
        - name: state
          data_type: STRING
          description: State where store is located
        - name: division_name
          data_type: STRING
          description: Division name in organizational hierarchy
        - name: company_name
          data_type: STRING
          description: Company name owning the store

    - name: dim_date_month
      description: Monthly date dimension for time-based analysis
      type: dimension
      columns:
        - name: sales_month_key
          data_type: STRING
          description: Primary key representing year-month (YYYY-MM format)
        - name: year
          data_type: NUMBER
          description: Calendar year
        - name: month
          data_type: NUMBER
          description: Month number (1-12)
        - name: month_name
          data_type: STRING
          description: Full month name (January, February, etc.)
        - name: quarter_name
          data_type: STRING
          description: Quarter name (Q1, Q2, Q3, Q4)

relationships:
  - name: fact_to_item
    description: Relationship between fact table and item dimension
    from_table: fact_monthly_sales
    from_column: item_key
    to_table: dim_item
    to_column: item_key
    relationship_type: many_to_one

  - name: fact_to_store
    description: Relationship between fact table and store dimension
    from_table: fact_monthly_sales
    from_column: store_key
    to_table: dim_store
    to_column: store_key
    relationship_type: many_to_one

  - name: fact_to_date_month
    description: Relationship between fact table and monthly date dimension
    from_table: fact_monthly_sales
    from_column: sales_month_key
    to_table: dim_date_month
    to_column: sales_month_key
    relationship_type: many_to_one