version: 1.0
name: sales_summary_model
description: Sales summary data model across multiple channels

tables:
  - name: store_sales
    description: Store channel sales transactions
    columns:
      - name: ss_sold_date_sk
        data_type: NUMBER
        description: Date dimension key for sale date
      - name: ss_item_sk
        data_type: NUMBER
        description: Item dimension key
      - name: ss_store_sk
        data_type: NUMBER
        description: Store dimension key
      - name: ss_quantity
        data_type: NUMBER
        description: Quantity sold
      - name: ss_ext_sales_price
        data_type: NUMBER
        description: Extended sales price
      - name: ss_net_profit
        data_type: NUMBER
        description: Net profit amount

  - name: catalog_sales
    description: Catalog channel sales transactions
    columns:
      - name: cs_sold_date_sk
        data_type: NUMBER
        description: Date dimension key for sale date
      - name: cs_item_sk
        data_type: NUMBER
        description: Item dimension key
      - name: cs_quantity
        data_type: NUMBER
        description: Quantity sold
      - name: cs_ext_sales_price
        data_type: NUMBER
        description: Extended sales price
      - name: cs_net_profit
        data_type: NUMBER
        description: Net profit amount

  - name: web_sales
    description: Web channel sales transactions
    columns:
      - name: ws_sold_date_sk
        data_type: NUMBER
        description: Date dimension key for sale date
      - name: ws_item_sk
        data_type: NUMBER
        description: Item dimension key
      - name: ws_quantity
        data_type: NUMBER
        description: Quantity sold
      - name: ws_ext_sales_price
        data_type: NUMBER
        description: Extended sales price
      - name: ws_net_profit
        data_type: NUMBER
        description: Net profit amount

  - name: date_dim
    description: Date dimension table
    columns:
      - name: d_date_sk
        data_type: NUMBER
        description: Date dimension key
      - name: d_date
        data_type: DATE
        description: Calendar date
      - name: d_year
        data_type: NUMBER
        description: Year
      - name: d_moy
        data_type: NUMBER
        description: Month of year
      - name: d_quarter_name
        data_type: STRING
        description: Quarter name

  - name: item
    description: Item dimension table
    columns:
      - name: i_item_sk
        data_type: NUMBER
        description: Item dimension key
      - name: i_category
        data_type: STRING
        description: Item category
      - name: i_brand
        data_type: STRING
        description: Item brand

  - name: store
    description: Store dimension table
    columns:
      - name: s_store_sk
        data_type: NUMBER
        description: Store dimension key
      - name: s_store_name
        data_type: STRING
        description: Store name
      - name: s_state
        data_type: STRING
        description: Store state

  - name: sales_summary
    description: Aggregated sales summary across all channels
    columns:
      - name: sale_date
        data_type: DATE
        description: Sale date
      - name: year
        data_type: NUMBER
        description: Sale year
      - name: month
        data_type: NUMBER
        description: Sale month
      - name: quarter
        data_type: STRING
        description: Sale quarter
      - name: channel
        data_type: STRING
        description: Sales channel (store, catalog, web)
      - name: store_name
        data_type: STRING
        description: Store name (null for non-store channels)
      - name: store_state
        data_type: STRING
        description: Store state (null for non-store channels)
      - name: item_category
        data_type: STRING
        description: Item category
      - name: item_brand
        data_type: STRING
        description: Item brand
      - name: total_quantity
        data_type: NUMBER
        description: Total quantity sold
      - name: total_sales_amount
        data_type: NUMBER
        description: Total sales amount
      - name: total_profit
        data_type: NUMBER
        description: Total profit
      - name: transaction_count
        data_type: NUMBER
        description: Count of transactions

relationships:
  - name: store_sales_to_date_dim
    from_table: store_sales
    from_column: ss_sold_date_sk
    to_table: date_dim
    to_column: d_date_sk
    relationship_type: many_to_one
    description: Store sales to date dimension relationship

  - name: store_sales_to_item
    from_table: store_sales
    from_column: ss_item_sk
    to_table: item
    to_column: i_item_sk
    relationship_type: many_to_one
    description: Store sales to item dimension relationship

  - name: store_sales_to_store
    from_table: store_sales
    from_column: ss_store_sk
    to_table: store
    to_column: s_store_sk
    relationship_type: many_to_one
    description: Store sales to store dimension relationship

  - name: catalog_sales_to_date_dim
    from_table: catalog_sales
    from_column: cs_sold_date_sk
    to_table: date_dim
    to_column: d_date_sk
    relationship_type: many_to_one
    description: Catalog sales to date dimension relationship

  - name: catalog_sales_to_item
    from_table: catalog_sales
    from_column: cs_item_sk
    to_table: item
    to_column: i_item_sk
    relationship_type: many_to_one
    description: Catalog sales to item dimension relationship

  - name: web_sales_to_date_dim
    from_table: web_sales
    from_column: ws_sold_date_sk
    to_table: date_dim
    to_column: d_date_sk
    relationship_type: many_to_one
    description: Web sales to date dimension relationship

  - name: web_sales_to_item
    from_table: web_sales
    from_column: ws_item_sk
    to_table: item
    to_column: i_item_sk
    relationship_type: many_to_one
    description: Web sales to item dimension relationship