version: "1.0"
name: "sales_summary_by_channel_model"

tables:
  - name: "store_sales"
    description: "Store sales transaction data"
    columns:
      - name: "ss_sold_date_sk"
        type: "NUMBER"
        description: "Date surrogate key for store sales"
      - name: "ss_item_sk"
        type: "NUMBER"
        description: "Item surrogate key for store sales"
      - name: "ss_quantity"
        type: "NUMBER"
        description: "Quantity sold in store"
      - name: "ss_sales_price"
        type: "NUMBER"
        description: "Unit sales price in store"
      - name: "ss_ext_sales_price"
        type: "NUMBER"
        description: "Extended sales price in store"
      - name: "ss_net_profit"
        type: "NUMBER"
        description: "Net profit from store sales"
      - name: "ss_store_sk"
        type: "NUMBER"
        description: "Store surrogate key"

  - name: "catalog_sales"
    description: "Catalog sales transaction data"
    columns:
      - name: "cs_sold_date_sk"
        type: "NUMBER"
        description: "Date surrogate key for catalog sales"
      - name: "cs_item_sk"
        type: "NUMBER"
        description: "Item surrogate key for catalog sales"
      - name: "cs_quantity"
        type: "NUMBER"
        description: "Quantity sold via catalog"
      - name: "cs_sales_price"
        type: "NUMBER"
        description: "Unit sales price via catalog"
      - name: "cs_ext_sales_price"
        type: "NUMBER"
        description: "Extended sales price via catalog"
      - name: "cs_net_profit"
        type: "NUMBER"
        description: "Net profit from catalog sales"
      - name: "cs_call_center_sk"
        type: "NUMBER"
        description: "Call center surrogate key"

  - name: "web_sales"
    description: "Web sales transaction data"
    columns:
      - name: "ws_sold_date_sk"
        type: "NUMBER"
        description: "Date surrogate key for web sales"
      - name: "ws_item_sk"
        type: "NUMBER"
        description: "Item surrogate key for web sales"
      - name: "ws_quantity"
        type: "NUMBER"
        description: "Quantity sold via web"
      - name: "ws_sales_price"
        type: "NUMBER"
        description: "Unit sales price via web"
      - name: "ws_ext_sales_price"
        type: "NUMBER"
        description: "Extended sales price via web"
      - name: "ws_net_profit"
        type: "NUMBER"
        description: "Net profit from web sales"
      - name: "ws_web_site_sk"
        type: "NUMBER"
        description: "Web site surrogate key"

  - name: "date_dim"
    description: "Date dimension table"
    columns:
      - name: "d_date_sk"
        type: "NUMBER"
        description: "Date surrogate key (primary key)"
      - name: "d_date"
        type: "DATE"
        description: "Calendar date"
      - name: "d_year"
        type: "NUMBER"
        description: "Calendar year"
      - name: "d_moy"
        type: "NUMBER"
        description: "Month of year"
      - name: "d_qoy"
        type: "NUMBER"
        description: "Quarter of year"
      - name: "d_day_name"
        type: "STRING"
        description: "Day name (Monday, Tuesday, etc.)"

  - name: "item"
    description: "Item dimension table"
    columns:
      - name: "i_item_sk"
        type: "NUMBER"
        description: "Item surrogate key (primary key)"
      - name: "i_item_id"
        type: "STRING"
        description: "Item identifier"
      - name: "i_category"
        type: "STRING"
        description: "Item category"
      - name: "i_brand"
        type: "STRING"
        description: "Item brand"
      - name: "i_class"
        type: "STRING"
        description: "Item class"

  - name: "sales_summary_by_channel"
    description: "Unified sales summary across all channels"
    columns:
      - name: "sale_date"
        type: "DATE"
        description: "Date of sale"
      - name: "year"
        type: "NUMBER"
        description: "Year of sale"
      - name: "month"
        type: "NUMBER"
        description: "Month of sale"
      - name: "quarter"
        type: "NUMBER"
        description: "Quarter of sale"
      - name: "day_name"
        type: "STRING"
        description: "Day name of sale"
      - name: "channel"
        type: "STRING"
        description: "Sales channel (store, catalog, web)"
      - name: "item_category"
        type: "STRING"
        description: "Item category"
      - name: "item_brand"
        type: "STRING"
        description: "Item brand"
      - name: "item_class"
        type: "STRING"
        description: "Item class"
      - name: "total_quantity"
        type: "NUMBER"
        description: "Total quantity sold"
      - name: "total_sales_amount"
        type: "NUMBER"
        description: "Total extended sales amount"
      - name: "total_net_profit"
        type: "NUMBER"
        description: "Total net profit"
      - name: "avg_unit_price"
        type: "NUMBER"
        description: "Average unit price (calculated)"
      - name: "transaction_count"
        type: "NUMBER"
        description: "Count of transactions"

relationships:
  - name: "store_sales_to_date_dim"
    type: "many_to_one"
    from_table: "store_sales"
    from_column: "ss_sold_date_sk"
    to_table: "date_dim"
    to_column: "d_date_sk"
    description: "Store sales to date dimension relationship"

  - name: "store_sales_to_item"
    type: "many_to_one"
    from_table: "store_sales"
    from_column: "ss_item_sk"
    to_table: "item"
    to_column: "i_item_sk"
    description: "Store sales to item dimension relationship"

  - name: "catalog_sales_to_date_dim"
    type: "many_to_one"
    from_table: "catalog_sales"
    from_column: "cs_sold_date_sk"
    to_table: "date_dim"
    to_column: "d_date_sk"
    description: "Catalog sales to date dimension relationship"

  - name: "catalog_sales_to_item"
    type: "many_to_one"
    from_table: "catalog_sales"
    from_column: "cs_item_sk"
    to_table: "item"
    to_column: "i_item_sk"
    description: "Catalog sales to item dimension relationship"

  - name: "web_sales_to_date_dim"
    type: "many_to_one"
    from_table: "web_sales"
    from_column: "ws_sold_date_sk"
    to_table: "date_dim"
    to_column: "d_date_sk"
    description: "Web sales to date dimension relationship"

  - name: "web_sales_to_item"
    type: "many_to_one"
    from_table: "web_sales"
    from_column: "ws_item_sk"
    to_table: "item"
    to_column: "i_item_sk"
    description: "Web sales to item dimension relationship"